
<meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="author" content="Green Ido | @greenido | plus.google.com/+greenido"><meta name="viewport" content="width=device-width, initial-scale=1.0" /><title>Geo - Calculate the distance</title>

  <meta name="description" content="Geo - Calculate the distance">

  <meta name="viewport" content="width=device-width, initial-scale=1">

  

  <style type="text/css">

  .auto-style1 {

	  text-align: center;

  }

  .auto-style6 {

	  text-align: center;

	  color: #5F0284;

	  font-weight: normal;

	  font-size: large;

  }

  .auto-style7 {
	  color: #20062A;
	  font-family: "Arial Rounded MT Bold";
  }
  .auto-style8 {
	  text-align: center;
	  color: #5F0284;
	  font-weight: normal;
	  font-size: large;
	  font-family: "Arial Rounded MT Bold";
  }
  .auto-style9 {
	  color: #5F0284;
	  font-family: "Arial Rounded MT Bold";
  }
  .auto-style10 {
	  font-family: "Arial Rounded MT Bold";
  }
  .auto-style11 {
	  font-family: "Arial Rounded MT Bold";
	  color: #FFFFFF;
	  background-color: #5F0284;
  }

  </style>

   

<body background="file:///C:\Users\3202300\Desktop\project\Ij/stc 1.jpg">


<html class="no-js" lang="">

<head>

   

</head>

<body background="C:\Users\3202300\Desktop\project\AttendanceBylocation/stc 1.jpg">

 <p>
<input height="56" name="Image1" src="file:C:\Users\3202300\Desktop\project\AttendanceBylocation/NewJusoorLogoSaudi.png" type="image" width="191"></p>
 <div class="auto-style1">

							<p class="auto-style8"> 

							<strong>Attendance Record</strong><p class="auto-style6"> 

															
								&nbsp;<p class="auto-style6" style="height: 276px"> 






								

								&nbsp;<form method="post">

								<div class="auto-style1">

								<input checked="true" name="Radio1" type="radio" class="auto-style10"><span class="auto-style9">Check-In</span><span lang="en-us" class="auto-style10">&nbsp; &nbsp;

								</span>
									<input name="Radio1" type="radio" class="auto-style10"><span class="auto-style9">Check-Out</span></div>

								</form>

								

								<form method="post">

							  <div class="auto-style1">

								  <span lang="en-us"><span class="auto-style7">
								  Time</span><span class="auto-style10">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
								  </span></span>

								  <input readonly="readonly" type="time"  id="myTime" class="auto-style10" >

								  <br class="auto-style10">

		  						<span class="auto-style10" lang="en-us">Date&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
								  </span>&nbsp;<input readonly="readonly" type="date"  id="mydate" class="auto-style10"><type="date"  id="mydate" readonly="readonly"><br class="auto-style10">
								  <span class="auto-style10" lang="en-us">
								  Location </span>
								  <input readonly="readonly" type="text"  id="map" class="auto-style10"><type="text"  id="map" readonly="readonly"><br class="auto-style10">
	 

  </div>
</form>

  <div id="dis">

<button onclick="getLocations();gettimeAndDate()" class="auto-style11"> Verfiy</button>

  					  </div>	

  <br> <br> <br> 

   

    <button onclick="getDis()" class="auto-style11">OK</button>

  <div id="map">

  </div>

  <script src="https://code.jquery.com/jquery-2.2.2.min.js" integrity="sha256-36cp2Co+/62rEAAYHLmRCPIych47CvdM+uTBJwSzWjI=" crossorigin="anonymous"></script>

  

  <script>

  

  var geoPoint =[];
  
   function gettimeAndDate() {
       
       
var date = new Date();



var day = date.getDate(),

month = date.getMonth() + 1,

year = date.getFullYear(),

hour = date.getHours(),

min  = date.getMinutes();

month = (month < 10 ? "0" : "") + month;

day = (day < 10 ? "0" : "") + day;

hour = (hour < 10 ? "0" : "") + hour;

min = (min < 10 ? "0" : "") + min;



var today = year + "-" + month + "-" + day,

    displayTime = hour + ":" + min;

    

document.getElementById('mydate').value = today;     

document.getElementById("myTime").value = displayTime;
}
  
  

  function getLocations() {

    if (navigator.geolocation) {

      navigator.geolocation.getCurrentPosition(showPosition, showError);

    } else {

      var status = document.getElementById("demo");

      status.innerHTML = "Geolocation is not supported by this browser.";

      }

      

document.getElementById("map").value = geoPoint;
  }

  function showPosition(position) {

    geoPoint = [position.coords.latitude , position.coords.longitude]

	

    var status = document.getElementById("demo");

    status.innerHTML = "Your location is: " + position.coords.latitude + " ,  " + position.coords.longitude;

  }

  // show our errors for debuging

  function showError(error) {

    var x = document.getElementById("demo");

    switch (error.code) {

      case error.PERMISSION_DENIED:

        x.innerHTML = "Denied the request for Geolocation. Maybe, ask the user in a more polite way?"

        break;

      case error.POSITION_UNAVAILABLE:

        x.innerHTML = "Location information is unavailable.";

        break;

      case error.TIMEOUT:

        x.innerHTML = "The request to get location timed out.";

        break;

      case error.UNKNOWN_ERROR:

        x.innerHTML = "An unknown error occurred :(";

        break;

    }

  }

  function getDis() {

  

    var geo1 = [24.75121,46.65703];

    var geo2 = geoPoint;

	console.log(geoPoint);

    var distance = distanceBetween(geo1[0], geo1[1], geo2[0], geo2[1], "K");

    console.log("geo dis: " + distance);

    $("#dis").html("<h4>" + distance + "M</h4>");

  }

  function distanceBetween(lat1, lon1, lat2, lon2, unit) {

    var rlat1 = Math.PI * lat1 / 180

    var rlat2 = Math.PI * lat2 / 180

    var rlon1 = Math.PI * lon1 / 180

    var rlon2 = Math.PI * lon2 / 180

    var theta = lon1 - lon2

    var rtheta = Math.PI * theta / 180

    var dist = Math.sin(rlat1) * Math.sin(rlat2) + Math.cos(rlat1) * Math.cos(rlat2) * Math.cos(rtheta);

    dist = Math.acos(dist)

    dist = dist * 180 / Math.PI

    dist = dist * 60 * 1.1515

    dist = dist * 1000

    if (unit == "K") {

      dist = dist * 1.609344

    }

    if (unit == "N") {

      dist = dist * 0.8684

    }

	if (dist >100 ){

	alert("You are outside the building");

	}

	    else if (dist <100 )

		   alert ("You are inside the building");
		   
		   	    else if (dist != 0 )

		   alert ("Please Verfiy location first");
  
		   
document.getElementById("dist").style.visibility = "hidden"; 
	    

    return dist

  }

  //

  //

  

</script>
 </div>
</body>
</html>
